/*!
 * 
 * (C) Copyright IBM Corp. 2017 - 2020. All Rights Reserved.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 * 
 * watson-web-channel 2.3.0
 * Contributors: Ethan Winters, Raymond Chu, Karen Harris, Ashley Lord, Amy Zhong, Ryan Simpson, Anthony Wong, Wilson Wong, David G Terry, Simon Burns, Damon Lundin, John Engstrom, Neil Mallinar
 * Built: Aug 10 2020 9:19 pm +00:00
 * 
 * 
 */
(window.webpackJsonpWatsonAssistantChat=window.webpackJsonpWatsonAssistantChat||[]).push([[0],{466:function(e,t,n){"use strict";var s;n.d(t,"a",(function(){return s})),function(e){e[e.CONNECTING=1]="CONNECTING",e[e.DISCONNECTED=2]="DISCONNECTED"}(s||(s={}))},474:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var s=function(e,t,n,s){this.user=e,this.sessionID=t,this.callback=n,this.config=s}},499:function(e,t,n){"use strict";n.r(t);var s,r=n(7),i=n.n(r),a=n(590),o=n.n(a),c=n(35),u=n.n(c),l=n(10),d=n.n(l),h=n(11),p=n.n(h),f=n(3),v=n.n(f),g=n(13),b=n(80),E=n(81),y=n(1),k=n(43),C=n(31),S=n(25),T=n(8),A=n(41),m=n(4),I=n(2),N=n(101),O=n.n(N),_=n(28),w=n.n(_),D=n(116),R=n.n(D),M=n(6),P=n.n(M),j=n(36),U=n.n(j),G=n(37),x=n.n(G);!function(e){e.LOA1="loa1"}(s||(s={}));var q,L,V,F,W,H,J,K=n(115),z=n(168),B=n(474);!function(e){e.PUBLISH_EVENT="ms.PublishEvent",e.UPDATE_CONVERSATION_FIELD="cm.UpdateConversationField",e.INIT_CONNECTION="InitConnection",e.CLOCK="GetClock",e.REQUEST_CONVERSATION="cm.ConsumerRequestConversation",e.SUBSCRIBE_CONVERSATION_METADATA="cqm.SubscribeExConversations",e.UNSUBSCRIBE_CONVERSATION_METADATA="cqm.UnsubscribeExConversations",e.SUBSCRIBE_CONVERSATION_EVENTS="ms.SubscribeMessagingEvents"}(q||(q={})),function(e){e.REQUEST="req"}(L||(L={})),function(e){e.SHARK="SharkContext"}(V||(V={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.GONE="GONE",e.COMPOSING="COMPOSING",e.PAUSE="PAUSE"}(F||(F={})),function(e){e.AGENT="ASSIGNED_AGENT",e.VISITOR="CONSUMER"}(W||(W={})),function(e){e.CONTENT_EVENT="ContentEvent",e.RICH_CONTENT_EVENT="RichContentEvent",e.CHAT_STATE_EVENT="ChatStateEvent",e.ACCEPTED_STATUS_EVENT="AcceptStatusEvent"}(H||(H={})),function(e){e.UPSERT="UPSERT",e.DELETE="DELETE"}(J||(J={}));var Q=n(42),Z=function(e,t,n,s){return new(n||(n=v.a))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))},X=function(e,t){var n,s,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof p.a&&(i[d.a]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(r=2&i[0]?s.return:i[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,s=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],s=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},Y=4,$=T.c+" An attempt to communicate with Liveperson failed",ee=3e3,te="1.0",ne="smt",se="appInstallationId";function re(e,t,n,s,r,i){return Z(this,void 0,void 0,(function(){var a,o,c;return X(this,(function(u){switch(u.label){case 0:return a="https://"+e+"/api/account/"+t+"/app/"+n+"/engagement?v="+te,o={identities:[{sub:s.sub,iss:s.iss,acr:s.acr}],consumerId:s.sub,entryPoints:i,engagementAttributes:r},c={method:"POST",mode:"cors",body:w()(o),headers:{"Content-Type":"application/json",accept:"application/json"}},[4,ce(a,c,Y,ae)];case 1:return[2,u.sent()]}}))}))}function ie(e,t,n,s,r,i,a){return Z(this,void 0,void 0,(function(){var o,c,u;return X(this,(function(l){switch(l.label){case 0:return o="https://"+e+"/api/account/"+t+"/app/"+n+"/report?v="+te+"&vid="+i.visitorId+"&sid="+i.sessionId,c={consumerId:s.sub,entryPoints:a,engagementAttributes:r,pageId:i.pageId},u={method:"POST",mode:"cors",body:w()(c),headers:{"Content-Type":"application/json","X-Http-Method-Override":"PUT",accept:"application/json"}},[4,ce(o,u,Y,ae)];case 1:return[2,l.sent()]}}))}))}function ae(e,t){return Z(this,void 0,void 0,(function(){var n,s,r,i;return X(this,(function(a){switch(a.label){case 0:if(500!==t.status)return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),n=e.url,[4,t.json()];case 2:return s=a.sent(),(r=s.message.match(/vid: (\S+)/)[1])&&(e.url=n+"&vid="+r),[2,e];case 3:throw i=a.sent(),Object(I.b)("Could not retrieve JSON from Monitoring API reponse",i),new Error($);case 4:return[3,6];case 5:throw Object(I.b)("Could not retrieve visitor id. Monitoring API did not throw a 500 status code ",t),new Error($);case 6:return[2]}}))}))}function oe(e,t){return Z(this,void 0,void 0,(function(){var n;return X(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,ce(e,{method:"GET",mode:"cors",headers:{"X-WATSON-TARGET-DOMAIN":t}},0)];case 1:return[2,s.sent()];case 2:return n=s.sent(),Object(I.b)("Fetch call to retrieve agent avatar failed",n),[3,3];case 3:return[2,void 0]}}))}))}function ce(e,t,n,s){var r,i,a;return Z(this,void 0,void 0,(function(){var o,c,u;return X(this,(function(l){switch(l.label){case 0:return l.trys.push([0,7,,8]),[4,Object(Q.a)(e,t)];case 1:return o=l.sent(),(null===(r=o)||void 0===r?void 0:r.ok)?[4,o.json()]:[3,3];case 2:return[2,l.sent()];case 3:if(0===n)throw new Error($);return s?[4,s({url:e,fetchParameters:t},o)]:[3,5];case 4:c=l.sent(),e=(null===(i=c)||void 0===i?void 0:i.url)||e,t=(null===(a=c)||void 0===a?void 0:a.fetchParameters)||t,l.label=5;case 5:return[4,Object(A.b)(ee)];case 6:return l.sent(),[2,ce(e,t,n-1,s)];case 7:throw u=l.sent(),Object(I.b)("Did not succeed calling "+e,u),new Error($);case 8:return[2]}}))}))}var ue,le,de,he,pe,fe=(ue=function(e,t){return(ue=x.a||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ue(e,t),e.prototype=null===t?U()(t):(n.prototype=t.prototype,new n)}),ve=function(){return(ve=P.a||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},ge=function(e,t,n,s){return new(n||(n=v.a))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))},be=function(e,t){var n,s,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof p.a&&(i[d.a]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(r=2&i[0]?s.return:i[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,s=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],s=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},Ee="asyncMessagingEnt",ye=function(e){function t(t,n,s,r){var i=this,a=r.remote.mainConfig.service_desk;(i=e.call(this,t,n,s,a)||this).userId=t.id,i.pendingRequests=new R.a,i.config=a;var o=a.subscription;if(i.regionURL=K.a[r.public.region],!o||!o.data)throw Error("The integration need to be subscribed first to the service desk");if(!(o.account&&o.account.id&&o.data[Ee]&&o.data[ne]&&o.data[se]))throw Error("Mandatory service desk subscription values missing");return i.accountID=o.account.id,i.appInstallationId=o.data[se],i}return fe(t,e),t.prototype.sendRequest=function(e){var t=Object(z.a)();return this.pendingRequests.set(String(e.id),t),this.openedSocket.send(w()(e)),t},t.prototype.userTyping=function(e){return ge(this,void 0,void 0,(function(){var e;return be(this,(function(t){return this.assertSocketOpen(),e=this.preparePublishEventReq(H.CHAT_STATE_EVENT,void 0,void 0,F.COMPOSING),this.sendSocket(e),[2]}))}))},t.prototype.openSocket=function(e){return ge(this,void 0,void 0,(function(){var t,n,s,r=this;return be(this,(function(i){return this.openedSocket&&this.openedSocket.OPEN?[2,this.openedSocket]:(t=e[Ee],n="wss://"+t+"/ws_api/account/"+this.accountID+"/messaging/consumer?v=3",console.debug("ws_url",n),(s=new WebSocket(n)).onclose=function(){r.cleanupResources()},s.onerror=function(e){Object(I.b)("WS error",e)},s.onmessage=function(e){r.responseDataProcessor(e)},[2,new v.a((function(e){s.onopen=function(){return e(s)}}))])}))}))},t.prototype.responseDataProcessor=function(e){var t=JSON.parse(e.data);switch(t.type){case"cm.RequestConversationResponse":if(t.code>=500)Object(I.b)("Something went wrong at LivePerson while requesting conversation!. Gotta retry",e.data),this.startChat(this.connectMessage);else{if(200!==t.code)throw this.resolvePendingRequest(t.reqId,t.body,!0),Error("FATAL error. Request conversation failing!"+e.data);this.resolvePendingRequest(t.reqId,t.body,!1)}break;case"ms.MessagingEventNotification":this.processNotifications(t.body);break;case"cqm.SubscribeExConversationsResponse":this.resolvePendingRequest(t.reqId,t.body,!1);break;case"cqm.ExConversationChangeNotification":var n=t.body.subscriptionId,s=this.pendingRequests.get(n),r=t.body;if(s&&this.resolvePendingRequest(n,r,!1),r.changes&&r.changes.length>0)switch(r.changes[0].type){case J.DELETE:this.callback.agentEndedChat(),this.cleanupResources();break;case J.UPSERT:var i=this.getAssignedParticipant(r);if(!this.currentAgent&&i){var a=r.changes[0],o=Number(a.result.conversationDetails.skillId);this.sendAgentJoined(i,o)}break;default:Object(I.b)("is there a new type of event - "+r.changes[0].type)}break;case"GetClockResponse":case"StringResponse":case"GenericSubscribeResponse":case"ms.PublishEventResponse":break;default:console.warn("unhandled LE message: "+w()(t.body))}},t.prototype.sendAgentJoined=function(e,t){var n,s,r,i;return ge(this,void 0,void 0,(function(){var a,o,c,u;return be(this,(function(l){switch(l.label){case 0:return a=this.config.subscription,o=a.data.acCdnDomain,[4,oe("https://"+this.regionURL+"/api/account/"+this.accountID+"/configuration/le-users/users/"+e.id,o)];case 1:return c=l.sent(),u={id:(null===(n=c)||void 0===n?void 0:n.employeeId)||e.id,login_name:e.id,full_name:(null===(s=c)||void 0===s?void 0:s.fullName)||"",nickname:(null===(r=c)||void 0===r?void 0:r.nickname)||"",skill_ids:[t],email:"",profile_picture_url:(null===(i=c)||void 0===i?void 0:i.pictureUrl)||""},this.currentAgent=u,this.callback.agentJoined(u),[2]}}))}))},t.prototype.getAssignedParticipant=function(e){var t=e.changes[0].result.conversationDetails.participants;return O()(t).call(t,(function(e){return"ASSIGNED_AGENT"===e.role}))},t.prototype.resolvePendingRequest=function(e,t,n){var s=this.pendingRequests.get(e);s?(this.pendingRequests.delete(e),n?s.doReject(t):s.doResolve(t)):Object(I.b)("Pending req "+e+" cannot be found in pending requests")},t.prototype.processNotifications=function(e){var t,n=this;!e.changes||e.changes.length<1||i()(t=e.changes).call(t,(function(e){n.handleNotificationEvents(e.event,e.originatorMetadata.role)}))},t.prototype.handleNotificationEvents=function(e,t){switch(e.type){case H.CONTENT_EVENT:var n=e;t===W.AGENT&&"text/plain"===n.contentType&&this.replyText(n.message);break;case H.CHAT_STATE_EVENT:switch((n=e).chatState){case F.ACTIVE:this.callback.agentTyping(!1);break;case F.COMPOSING:this.callback.agentTyping(!0);break;default:console.warn("unexpected chat state",n.chatState)}break;default:console.warn("unhandled event",e)}},t.prototype.assertConversationId=function(){if(!this.conversationId)throw Object(I.b)("No conversation_id present. Exit"),Error("Cannot proceed without Conversation Id")},t.prototype.assertSocketOpen=function(){if(!this.openedSocket||!this.openedSocket.OPEN)throw Object(I.b)("Socket not open"),Error("Socket is not open yet")},t.prototype.assertAuthJWT=function(){if(!this.authJWT)throw Object(I.b)("No Auth JWT present. Exit"),Error("Auth JWT is mandatory")},t.prototype.replyText=function(e){var t=this.currentAgent?this.currentAgent.id:null;this.callback.agentTyping(!1),this.callback.sendMessageToUser(Pe(e),t)},t.prototype.subscribeMessagingEvents=function(){this.assertConversationId(),this.assertSocketOpen();var e={id:Math.floor(1e9*Math.random()),kind:L.REQUEST,type:q.SUBSCRIBE_CONVERSATION_EVENTS,body:{fromSeq:0,dialogId:this.conversationId}};this.openedSocket.send(w()(e))},t.prototype.subscribeToOpenConversationsAndWaitForSubscribtionNotification=function(e){return ge(this,void 0,void 0,(function(){var t;return be(this,(function(n){switch(n.label){case 0:this.assertSocketOpen(),t={id:Math.floor(1e9*Math.random()),kind:L.REQUEST,type:q.SUBSCRIBE_CONVERSATION_METADATA,body:{convState:["OPEN"],minLastUpdatedTime:e}},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Object(A.a)(this.sendRequest(t),5e3)];case 2:return[2,n.sent()];case 3:return n.sent(),this.pendingRequests.delete(String(t.id)),[2,v.a.reject()];case 4:return[2]}}))}))},t.prototype.unsubscribeToMetadata=function(e){this.assertSocketOpen();var t={id:Math.floor(1e9*Math.random()),kind:L.REQUEST,type:q.UNSUBSCRIBE_CONVERSATION_METADATA,body:{subscriptionId:e}};this.openedSocket.send(w()(t))},t.prototype.requestConversation=function(e){return ge(this,void 0,void 0,(function(){var t,n;return be(this,(function(s){return this.assertSocketOpen(),t=Math.floor(1e9*Math.random()),n={id:t,kind:L.REQUEST,type:q.REQUEST_CONVERSATION,body:{conversationContext:{type:V.SHARK,visitorId:e.visitorId,sessionId:e.sessionId,interactionContextId:e.contextId},campaignInfo:{campaignId:String(e.campaignId),engagementId:String(e.engagementId)}}},[2,this.sendRequest(n)]}))}))},t.prototype.refreshConnection=function(){var e={id:Math.floor(1e9*Math.random()),kind:L.REQUEST,type:q.CLOCK,body:void 0};this.openedSocket&&this.openedSocket.OPEN&&this.openedSocket.send(w()(e))},t.prototype.initAuth=function(){return ge(this,void 0,void 0,(function(){var e;return be(this,(function(t){return this.assertSocketOpen(),this.assertAuthJWT(),e={type:q.INIT_CONNECTION,body:void 0,id:Math.floor(1e9*Math.random()),headers:[{type:".ams.headers.ConsumerAuthentication",jwt:this.authJWT}]},this.openedSocket.send(w()(e)),[2,!0]}))}))},t.prototype.mapContextToEngagementAttributes=function(){return[{type:"lead",lead:{topic:"whatever",leadId:"xyz123"}}]},t.prototype.populateWithPageInfo=function(){var e=window.location.href;return[e=this.cleanUpEntryPoint(e)]},t.prototype.cleanUpEntryPoint=function(e){return e=(e=(e=e.replace(/(\?.*)/g,"")).replace("#","?hash=")).replace("@","at")},t.prototype.startChat=function(e){return ge(this,void 0,void 0,(function(){var t,n,r,a,o,c,u,l,d,h,p,f,v,g=this;return be(this,(function(b){var E;switch(b.label){case 0:return t=this.config.subscription,n=O()(E=e.output.generic).call(E,m.j),this.connectMessage=e,this.authJWT=n.transfer_info.additional_data.jwt,r=t.data[ne],a=this.mapContextToEngagementAttributes(),o=this.populateWithPageInfo(),c={sub:this.userId,iss:"www.ibm.com",acr:s.LOA1},[4,re(r,this.accountID,this.appInstallationId,c,a,o)];case 1:if(!(u=b.sent()).engagementDetails||!u.engagementDetails[0])throw Error("no engagement available, does it mean no agent available???");return l={engagementId:u.engagementDetails[0].engagementId,campaignId:u.engagementDetails[0].campaignId,contextId:u.engagementDetails[0].contextId,sessionId:u.sessionId,visitorId:u.visitorId},d=this,[4,this.openSocket(t.data)];case 2:return d.openedSocket=b.sent(),[4,this.initAuth()];case 3:return b.sent(),[4,this.isThereOnGoingConversation()];case 4:if(b.sent())return[3,8];b.label=5;case 5:return b.trys.push([5,7,,8]),[4,Object(A.a)(this.requestConversation(l),5e3)];case 6:return h=b.sent(),this.conversationId=h.conversationId,[3,8];case 7:throw p=b.sent(),Error("Could not get conversation_id from LiveEngage"+p);case 8:return[4,ie(r,this.accountID,this.appInstallationId,c,a,u,o)];case 9:return b.sent(),this.subscribeMessagingEvents(),this.assertSocketOpen(),this.refreshInterval=window.setInterval((function(){return g.refreshConnection()}),3e4),(f=n.transfer_info)&&f.summary_message_to_agent&&(v=f.summary_message_to_agent,i()(v).call(v,(function(e){var t=e.text;if(t){var n=g.preparePublishEventReq("ContentEvent","text/plain",t,void 0);g.sendSocket(n)}}))),[2]}}))}))},t.prototype.isThereOnGoingConversation=function(){return ge(this,void 0,void 0,(function(){var e;return be(this,(function(t){switch(t.label){case 0:if(this.conversationId)return[2,!0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.getOpenConversationsAndSubscribeForFutureNotifications()];case 2:return(e=t.sent()).changes.length>0?(this.conversationId=e.changes[0].result.convId,[2,!0]):[2,!1];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))},t.prototype.getOpenConversationsAndSubscribeForFutureNotifications=function(){return ge(this,void 0,void 0,(function(){var e,t,n,s;return be(this,(function(r){switch(r.label){case 0:t=0,r.label=1;case 1:if(e||!(t<5))return[3,10];r.label=2;case 2:return r.trys.push([2,8,,9]),[4,this.subscribeToOpenConversationsAndWaitForSubscribtionNotification(0)];case 3:n=r.sent(),s=Object(z.a)(),this.pendingRequests.set(n.subscriptionId,s),r.label=4;case 4:return r.trys.push([4,6,,7]),[4,Object(A.a)(s,3e3)];case 5:return e=r.sent(),this.metadataSubscriptionId=n.subscriptionId,[3,7];case 6:return r.sent(),t++,this.pendingRequests.delete(n.subscriptionId),this.unsubscribeToMetadata(n.subscriptionId),[3,7];case 7:return[3,9];case 8:return r.sent(),t++,[3,9];case 9:return[3,1];case 10:return e?[2,e]:[2,v.a.reject()]}}))}))},t.prototype.endChat=function(){if(this.openedSocket.OPEN){var e=this.prepareUpdateConvFieldReq("ConversationStateField","CLOSE");return this.sendSocket(e),this.cleanupResources(),v.a.resolve()}return v.a.reject()},t.prototype.cleanupResources=function(){this.unsubscribeToMetadata(this.metadataSubscriptionId),window.clearInterval(this.refreshInterval),this.openedSocket&&this.openedSocket.OPEN&&this.openedSocket.close(),this.conversationId=void 0,this.openedSocket=void 0,this.refreshInterval=void 0,this.pendingRequests.clear(),this.currentAgent=void 0},t.prototype.prepareUpdateConvFieldReq=function(e,t){return{id:Math.floor(1e9*Math.random()),kind:L.REQUEST,type:q.UPDATE_CONVERSATION_FIELD,body:{conversationId:this.conversationId,conversationField:[{field:e,conversationState:t}]}}},t.prototype.preparePublishEventReq=function(e,t,n,s){return{type:q.PUBLISH_EVENT,body:{dialogId:this.conversationId,event:ve(ve(ve({type:e},t&&{contentType:t}),n&&{message:n}),s&&{chatState:s})},id:Math.floor(1e9*Math.random())}},t.prototype.sendMessageToAgent=function(e,t){return ge(this,void 0,void 0,(function(){var t,n=this;return be(this,(function(s){return t=e.input.text,[2,new v.a((function(e,s){if(n.openedSocket.OPEN){var r=n.preparePublishEventReq("ContentEvent","text/plain",t,void 0);n.sendSocket(r),e()}else s()}))]}))}))},t.prototype.sendSocket=function(e){if(e)if(this.openedSocket){var t=w()(e);this.openedSocket.send(t)}else Object(I.b)("Socket is not open");else Object(I.b)("Empty req_obj!")},t.prototype.getAgentInfo=function(e){return{id:null,login_name:"agent1@fake.com",full_name:"Agent One",nickname:"One",skill_ids:[],email:"agaent1@fgake.com",profile_picture_url:"someurl.com/fakeimage.png"}},t.prototype.getAgentAvailability=function(){return{position_in_queue:3,estimated_wait_time:void 0}},t.prototype.userReadMessages=function(){return ge(this,void 0,void 0,(function(){return be(this,(function(e){return Object(I.b)("not implemented"),[2]}))}))},t}(B.a),ke=n(466),Ce=function(){var e=function(t,n){return(e=x.a||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?U()(n):(s.prototype=n.prototype,new s)}}(),Se=function(e,t,n,s){return new(n||(n=v.a))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))},Te=function(e,t){var n,s,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof p.a&&(i[d.a]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(r=2&i[0]?s.return:i[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,s=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],s=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},Ae="buttonId",me="sfDomain",Ie="organizationId";!function(e){e.IP_ADDRESS="Visitor IP Address",e.NETWORK="Network",e.LOCATION="Location",e.AGENT_APP_SESSION="x_watson_assistant_session",e.AGENT_APP_TOKEN="x_watson_assistant_token"}(le||(le={})),function(e){e.IP_ADDRESS="IpAddress",e.NETWORK="VisitorNetwork",e.LOCATION="Location",e.AGENT_APP_SESSION="x_watson_assistant_session__c",e.AGENT_APP_TOKEN="x_watson_assistant_token__c"}(de||(de={})),function(e){e.CASE="Case",e.CHAT_TRANSCRIPT="LiveChatTranscript"}(he||(he={})),function(e){e.CASE_ID="CaseId"}(pe||(pe={}));var Ne=function(e){function t(t,n,s,r,i){var a,o,c=this,u=r.remote.mainConfig.service_desk;(c=e.call(this,t,n,s,u)||this).toAgentSequence=0,c.isPolling=!1,c.isReconnecting=!1,c.currentAgent={id:"",login_name:"",full_name:"",nickname:"",skill_ids:[],email:""};var l=u.subscription;if(null===(a=l)||void 0===a?void 0:a.data)if((null===(o=l.account)||void 0===o?void 0:o.id)&&l.data[Ae]&&l.data[me]&&l.data[Ie])if(r.public&&r.public.region){var d=K.a[r.public.region];if(d)return c.baseUrl="https://"+d+"/chat/rest",c.locale=i,c.deploymentId=l.account.id,c.buttonId=l.data[Ae],c.organizationId=l.data[Ie],c.sfDomain=l.data[me],c;c.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:"Unable to determine URL to call Salesforce"})}else c.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:"Unable to determine web chat region"});else c.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:"Mandatory service desk subscription values missing"});else c.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:"The integration needs to be subscribed first to the service desk"})}return Ce(t,e),t.prototype.buildPrechatDetails=function(e,t,n){return{label:e,value:t,entityFieldMaps:[{entityName:he.CHAT_TRANSCRIPT,fieldName:n}],transcriptFields:[n],displayToAgent:!1}},t.prototype.buildPrechatEntities=function(e,t){return{entityName:he.CHAT_TRANSCRIPT,showOnCreate:!0,linkToEntityName:he.CASE,linkToEntityField:pe.CASE_ID,saveToTranscript:pe.CASE_ID,entityFieldsMaps:[{fieldName:t,label:e}]}},t.prototype.getAllPrechatDetails=function(e,t,n,s,r){var i=this.buildPrechatDetails(le.AGENT_APP_SESSION,e,de.AGENT_APP_SESSION),a=this.buildPrechatDetails(le.AGENT_APP_TOKEN,t,de.AGENT_APP_TOKEN),o=this.buildPrechatDetails(le.IP_ADDRESS,n||"",de.IP_ADDRESS),c=this.buildPrechatDetails(le.NETWORK,r||"",de.NETWORK);return[i,a,o,this.buildPrechatDetails(le.LOCATION,s||"",de.LOCATION),c]},t.prototype.getAllPrechatEntities=function(){var e=this.buildPrechatEntities(le.AGENT_APP_SESSION,de.AGENT_APP_SESSION),t=this.buildPrechatEntities(le.AGENT_APP_TOKEN,de.AGENT_APP_TOKEN),n=this.buildPrechatEntities(le.IP_ADDRESS,de.IP_ADDRESS),s=this.buildPrechatEntities(le.NETWORK,de.NETWORK);return[e,t,n,this.buildPrechatEntities(le.LOCATION,de.LOCATION),s]},t.prototype.startChat=function(e){var t,n,s,r,i,a,o,c,u,l,d,h,p,f,v,g,b,E,y,k,C,S,T,A,I,N,_;return Se(this,void 0,void 0,(function(){var D,R,M,P,j,U,G,x,q,L,V,F,W,H,J;return Te(this,(function(K){var B;switch(K.label){case 0:if(D=O()(B=e.output.generic).call(B,m.j),R=null===(s=null===(n=null===(t=e.context)||void 0===t?void 0:t.integrations)||void 0===n?void 0:n.chat)||void 0===s?void 0:s.browser_info,!(null===(a=null===(i=null===(r=D)||void 0===r?void 0:r.transfer_info)||void 0===i?void 0:i.additional_data)||void 0===a?void 0:a.jwt))return this.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:"Unable to connect due to missing security tokens"}),[2];this.buttonId=(null===(u=null===(c=null===(o=D)||void 0===o?void 0:o.transfer_info)||void 0===c?void 0:c.assignee)||void 0===u?void 0:u.buttonId)||this.buttonId,this.organizationId=(null===(h=null===(d=null===(l=D)||void 0===l?void 0:l.transfer_info)||void 0===d?void 0:d.assignee)||void 0===h?void 0:h.organizationId)||this.organizationId,this.deploymentId=(null===(v=null===(f=null===(p=D)||void 0===p?void 0:p.transfer_info)||void 0===f?void 0:f.assignee)||void 0===v?void 0:v.deploymentId)||this.deploymentId,this.sfDomain=(null===(E=null===(b=null===(g=D)||void 0===g?void 0:g.transfer_info)||void 0===b?void 0:b.assignee)||void 0===E?void 0:E.sfDomain)||this.sfDomain,M=D.transfer_info.additional_data.jwt,P=this.baseUrl+"/System/SessionId",K.label=1;case 1:return K.trys.push([1,3,,4]),U={"X-LIVEAGENT-AFFINITY":null,"X-LIVEAGENT-API-VERSION":"47","X-WATSON-TARGET-DOMAIN":this.sfDomain},[4,this.sendToSalesforce("GET",P,null,U)];case 2:return j=K.sent(),[3,4];case 3:return G=K.sent(),this.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:G}),[2];case 4:if(!j||!j.ok)return this.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:"Unable to start a live agent session: "+j.status}),[2];K.label=5;case 5:return K.trys.push([5,7,,8]),x=this,[4,j.json()];case 6:return x.chatSessionData=K.sent(),[3,8];case 7:return q=K.sent(),this.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:q}),[2];case 8:L=this.baseUrl+"/Chasitor/ChasitorInit",V=this.getAllPrechatDetails(this.sessionID,M,null===(y=R)||void 0===y?void 0:y.client_ip_address,void 0,void 0),F=this.getAllPrechatEntities(),W=w()({organizationId:this.organizationId,deploymentId:this.deploymentId,buttonId:this.buttonId,userAgent:null===(k=navigator)||void 0===k?void 0:k.userAgent,language:this.locale?this.locale:null===(C=navigator)||void 0===C?void 0:C.language,screenResolution:(null===(T=null===(S=window)||void 0===S?void 0:S.screen)||void 0===T?void 0:T.height)+"X"+(null===(I=null===(A=window)||void 0===A?void 0:A.screen)||void 0===I?void 0:I.width),prechatDetails:V,receiveQueueUpdates:!0,isPost:!0,prechatEntities:F}),K.label=9;case 9:return K.trys.push([9,11,,12]),[4,this.sendToSalesforce("POST",L,W,null)];case 10:return H=K.sent(),[3,12];case 11:return J=K.sent(),this.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:J}),[3,12];case 12:return H&&H.ok?(this.hasChatStarted=Object(z.a)(),this.startPolling(),[4,this.hasChatStarted]):(this.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:"Unable to contact an agent: "+H.status}),[2]);case 13:K.sent();try{this.sendSummaryMessages(null===(_=null===(N=D)||void 0===N?void 0:N.transfer_info)||void 0===_?void 0:_.summary_message_to_agent)}catch(e){this.callback.setErrorStatus({type:ke.a.CONNECTING,logInfo:e})}return[2]}}))}))},t.prototype.endChat=function(){return Se(this,void 0,void 0,(function(){var e,t,n;return Te(this,(function(s){switch(s.label){case 0:if(this.isPolling=!1,this.isReconnecting)return[3,4];e=this.baseUrl+"/Chasitor/ChatEnd",t=w()({reason:"client"}),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.sendToSalesforce("POST",e,t,null)];case 2:return(n=s.sent())&&n.ok||Object(I.b)("Failed to end chat",n),[3,4];case 3:return s.sent(),Object(I.b)("Unable to close chat with Salesforce agent."),[3,4];case 4:return[2]}}))}))},t.prototype.sendMessageToAgent=function(e,t){var n;return Se(this,void 0,void 0,(function(){var t,s,r;return Te(this,(function(i){switch(i.label){case 0:if(!this.isReconnecting)return[3,1];throw new Error("[SFServiceDesk] Message failed to send due to a reconnection in progress");case 1:return t=this.baseUrl+"/Chasitor/ChatMessage",s=w()({text:e.input.text}),[4,this.sendToSalesforce("POST",t,s,null)];case 2:if(r=i.sent(),!(null===(n=r)||void 0===n?void 0:n.ok))throw new Error("[SFServiceDesk] Message failed to send");i.label=3;case 3:return[2]}}))}))},t.prototype.userReadMessages=function(){return v.a.resolve()},t.prototype.userTyping=function(e){return Se(this,void 0,void 0,(function(){var t,n,s;return Te(this,(function(r){switch(r.label){case 0:if(this.isReconnecting)return[3,5];t=void 0,n=void 0,n=e?this.baseUrl+"/Chasitor/ChasitorTyping":this.baseUrl+"/Chasitor/ChasitorNotTyping",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.sendToSalesforce("POST",n)];case 2:return t=r.sent(),[3,4];case 3:return s=r.sent(),Object(I.b)("Failed calling "+n,s),[3,4];case 4:t&&t.ok||Object(I.b)("Failed calling "+n+", response code: "+t.status),r.label=5;case 5:return[2]}}))}))},t.prototype.getMessagesFromAgent=function(e){return Se(this,void 0,void 0,(function(){var t,n,s,r,i,a,o,c,u,l,d,h,p;return Te(this,(function(f){switch(f.label){case 0:return t=this.baseUrl+"/System/Messages?ack="+e,[4,Object(Q.a)(t,{method:"GET",credentials:"include",headers:this.getHeaders(!1)})];case 1:return n=f.sent(),s=e,200!==n.status?[3,21]:[4,n.json()];case 2:r=f.sent(),s=r.sequence,r.offset&&(this.lastOffset=r.offset),i=0,f.label=3;case 3:if(!(i<r.messages.length))return[3,20];switch(a=r.messages[i],a.type){case"AgentDisconnect":return[3,4];case"AgentTyping":return[3,5];case"AgentNotTyping":return[3,6];case"ChasitorSessionData":return[3,7];case"ChatEnded":return[3,9];case"ChatEstablished":return[3,10];case"ChatMessage":return[3,11];case"ChatRequestFail":return[3,12];case"ChatRequestSuccess":return[3,13];case"ChatTransferred":return[3,14];case"CustomEvent":return[3,15];case"NewVisitorBreadcrumb":return[3,16];case"QueueUpdate":return[3,17]}return[3,18];case 4:return this.updateCurrentAgent("",""),[3,19];case 5:return this.callback.agentTyping(!0),[3,19];case 6:return this.callback.agentTyping(!1),[3,19];case 7:return[4,this.resyncState()];case 8:return f.sent(),[3,19];case 9:return this.isPolling=!1,this.callback.agentEndedChat(),[3,19];case 10:return o=a.message,this.updateCurrentAgent(o.name,o.userId),this.callback.agentJoined(this.currentAgent),this.hasChatStarted.doResolve(),[3,19];case 11:return c=a.message,this.callback.agentTyping(!1),this.callback.sendMessageToUser(Pe(c.text),this.currentAgent.id),[3,19];case 12:return u=a.message,this.isPolling=!1,this.hasChatStarted.isResolved&&"Unavailable"===u.reason?this.callback.agentEndedChat():this.hasChatStarted.doReject(),[3,19];case 13:return 0!==(l=a.message).queuePosition&&(p={position_in_queue:l.queuePosition+1},this.callback.updateAgentAvailability(p)),[3,19];case 14:return d=a.message,this.updateCurrentAgent(d.name,d.userId),this.callback.beginTransferToAnotherAgent(this.currentAgent),this.callback.agentJoined(this.currentAgent),[3,19];case 15:case 16:return[3,19];case 17:return h=a.message,p={position_in_queue:h.position+1},this.callback.updateAgentAvailability(p),[3,19];case 18:return Object(I.b)("unhandled Salesforce message: "+a.type),[3,19];case 19:return i++,[3,3];case 20:return[3,24];case 21:return 503!==n.status?[3,23]:[4,this.issueReconnect()];case 22:return s=f.sent(),[3,24];case 23:if(!n.ok)throw new Error("Error polling for messages: "+n.status);f.label=24;case 24:return[2,s]}}))}))},t.prototype.sendSummaryMessages=function(e){return Se(this,void 0,void 0,(function(){var t,n,s;return Te(this,(function(r){switch(r.label){case 0:if(!e)return[2];t=0,r.label=1;case 1:return t<e.length?(n=e[t],(s=n.text)?[4,Object(A.b)(15)]:[3,4]):[3,5];case 2:return r.sent(),[4,this.sendMessageToAgent(je(s),"")];case 3:r.sent(),r.label=4;case 4:return t++,[3,1];case 5:return[2]}}))}))},t.prototype.issueReconnect=function(){return Se(this,void 0,void 0,(function(){var e,t,n;return Te(this,(function(s){switch(s.label){case 0:return this.isReconnecting=!0,e=this.baseUrl+"/System/ReconnectSession?ReconnectSession.offset="+this.lastOffset,[4,Object(Q.a)(e,{method:"GET",credentials:"include",headers:this.getHeaders(!1)})];case 1:if(!(t=s.sent())||!t.ok)throw new Error("Error reconnecting after 503 Salesforce error: "+t.status);return[4,t.json()];case 2:if(!(n=s.sent()).messages||n.messages.length<1)throw new Error("Unexpected response when trying to reconnect: "+n);return this.chatSessionData.affinityToken=n.messages[0].message.affinityToken,[2,-1]}}))}))},t.prototype.sendToSalesforce=function(e,t,n,s){return Se(this,void 0,void 0,(function(){var r,i,a,o;return Te(this,(function(c){switch(c.label){case 0:r=0,c.label=1;case 1:return c.trys.push([1,5,,9]),[4,Object(Q.a)(t,{method:e,credentials:"include",body:n,headers:s||this.getHeaders(!0)})];case 2:return 409!==(i=c.sent()).status?[3,4]:[4,i.text()];case 3:a=c.sent(),this.toAgentSequence=Number(a.match(/\d+$/)[0])+1,c.label=4;case 4:return i.ok||r++,[3,9];case 5:if(o=c.sent(),3!==++r)return[3,6];throw o;case 6:return[4,Object(A.b)(100)];case 7:c.sent(),c.label=8;case 8:return[3,9];case 9:if(3!==r&&!i.ok)return[3,1];c.label=10;case 10:return[2,i]}}))}))},t.prototype.resyncState=function(){return Se(this,void 0,void 0,(function(){var e,t;return Te(this,(function(n){switch(n.label){case 0:return e=this.baseUrl+"/Chasitor/ChasitorResyncState",[4,Object(Q.a)(e,{method:"POST",credentials:"include",body:w()({organizationId:this.organizationId}),headers:this.getHeaders(!1)})];case 1:if(!(t=n.sent())||!t.ok)throw new Error("Failed to resync state: "+t.status);return this.isReconnecting=!1,[2]}}))}))},t.prototype.startPolling=function(){return Se(this,void 0,void 0,(function(){var e,t;return Te(this,(function(n){switch(n.label){case 0:this.isPolling=!0,e=-1,t=0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,this.getMessagesFromAgent(e)];case 2:return e=n.sent(),t=0,[3,7];case 3:return n.sent(),3!=++t?[3,4]:(this.isPolling?this.callback.setErrorStatus({type:ke.a.DISCONNECTED,isDisconnected:!0}):this.callback.setErrorStatus({type:ke.a.CONNECTING}),this.isPolling=!1,[3,6]);case 4:return[4,Object(A.b)(100)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:if(this.isPolling)return[3,1];n.label=8;case 8:return[2]}}))}))},t.prototype.updateCurrentAgent=function(e,t){this.currentAgent={nickname:e,id:t,login_name:"",full_name:"",skill_ids:[],email:""}},t.prototype.getHeaders=function(e){var t={"X-LIVEAGENT-AFFINITY":""+this.chatSessionData.affinityToken,"X-LIVEAGENT-API-VERSION":"47","X-LIVEAGENT-SESSION-KEY":""+this.chatSessionData.key,"X-WATSON-TARGET-DOMAIN":this.sfDomain};return e&&(this.toAgentSequence++,t["X-LIVEAGENT-SEQUENCE"]=""+this.toAgentSequence),t},t}(B.a),Oe=n(600);n.d(t,"createService",(function(){return Me})),n.d(t,"createAgentRequest",(function(){return je})),n.d(t,"createAgentResponse",(function(){return Pe})),n.d(t,"validateCustomServiceDesk",(function(){return Ue}));var _e=function(e,t,n,s){return new(n||(n=v.a))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))},we=function(e,t){var n,s,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof p.a&&(i[d.a]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(r=2&i[0]?s.return:i[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,s=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],s=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},De=function(){function e(e){this.showingDisconnectedError=!1,this.serviceManager=e}return e.prototype.createServiceDesk=function(){var e;return _e(this,void 0,void 0,(function(){var t,n,s,r,i,a,o,c,u,l,d,h,p;return we(this,(function(f){switch(f.label){case 0:if(this.serviceDesk)throw new Error("A service desk is already connected!");return t=this.serviceManager.store.getState(),n=t.sessionID,s=t.userID,r=t.config,i=t.locale,a={id:s,type:g.d.USER},this.serviceDeskCallback=new Re(this.serviceManager,this),(null===(e=r.public.__ibm__)||void 0===e?void 0:e.serviceDeskFactory)?(o={user:a,sessionID:n,callback:this.serviceDeskCallback},c=this,[4,r.public.__ibm__.serviceDeskFactory(o)]):[3,2];case 1:return c.serviceDesk=f.sent(),Ue(this.serviceDesk),[3,3];case 2:switch(u=r.remote,l=u.initConfig,d=u.mainConfig,h=l.service_desk.integration_type,p=d.service_desk,h){case Oe.a:this.serviceDesk=new Oe.b(a,n,this.serviceDeskCallback,p);break;case"liveperson":this.serviceDesk=new ye(a,n,this.serviceDeskCallback,r);break;case"salesforceweb":this.serviceDesk=new Ne(a,n,this.serviceDeskCallback,r,i);break;default:throw new Error('Service desk "'+h+'" not implemented!')}f.label=3;case 3:return[2]}}))}))},e.prototype.startChat=function(e){return _e(this,void 0,void 0,(function(){var t,n;return we(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,this.createServiceDesk()];case 1:return s.sent(),this.serviceManager.store.dispatch(Object(k.q)(!0)),t={eventName:"User Clicked to Start Human Chat",eventDescription:"User clicked button to start a human chat."},this.serviceManager.actions.track(t),[4,this.serviceDesk.startChat(e)];case 2:return s.sent(),[3,4];case 3:throw n=s.sent(),Object(I.b)("[startChat] An error with the service desk occurred.",n),this.serviceDeskCallback&&(this.serviceDeskCallback.setErrorStatus({type:ke.a.CONNECTING,logInfo:n}),this.serviceDeskCallback.isClosed=!0),this.serviceDesk=null,this.serviceDeskCallback=null,this.serviceManager.store.dispatch(Object(k.q)(!1)),n;case 4:return[2]}}))}))},e.prototype.endChat=function(){return _e(this,void 0,void 0,(function(){var e,t;return we(this,(function(n){switch(n.label){case 0:return this.serviceDesk?(this.serviceManager.store.getState().agentState.isConnected&&(e=Object(E.b)(S.a.USER_ENDED_CHAT,T.b),this.serviceManager.store.dispatch(Object(k.j)(e))),t={eventName:"User Clicked to End Human Chat",eventDescription:"User clicked button to end chat with human."},this.serviceManager.actions.track(t),[4,this.doEndChat()]):[2];case 1:return n.sent(),[2]}}))}))},e.prototype.doEndChat=function(){return _e(this,void 0,void 0,(function(){var e;return we(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Object(A.a)(this.serviceDesk.endChat(),5e3)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),Object(I.b)("[doEndChat] An error with the service desk occurred.",e),[3,3];case 3:return this.serviceDesk=null,this.serviceDeskCallback.isClosed=!0,this.serviceDeskCallback=null,this.serviceManager.store.dispatch(Object(k.k)()),[2]}}))}))},e.prototype.sendMessageToAgent=function(e){return _e(this,void 0,void 0,(function(){var t,n,s,r,i,a,o=this;return we(this,(function(c){switch(c.label){case 0:t=Object(b.a)(e,e.input.text,!1),n=t.ui_state.id,this.serviceManager.store.dispatch(Object(k.j)(t)),s={eventName:"Human Message Received from User",eventDescription:"User sends message to human agent."},this.serviceManager.actions.track(s),r=!1,i=!1,u()((function(){r||i||o.setMessageErrorState(n,C.a.RETRYING)}),3e3),u()((function(){r||o.setMessageErrorState(n,C.a.FAILED)}),2e4),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.serviceDesk.sendMessageToAgent(e,n)];case 2:return c.sent(),r=!0,this.setMessageErrorState(n,C.a.NONE),[3,4];case 3:return a=c.sent(),i=!0,Object(I.b)("[sendMessageToAgent] An error with the service desk occurred.",a),this.setMessageErrorState(n,C.a.FAILED),[3,4];case 4:return[2]}}))}))},e.prototype.userReadMessages=function(){return _e(this,void 0,void 0,(function(){var e;return we(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.serviceDesk.userReadMessages()];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),Object(I.b)("[userReadMessages] An error with the service desk occurred.",e),[3,3];case 3:return[2]}}))}))},e.prototype.userTyping=function(e){return _e(this,void 0,void 0,(function(){var t;return we(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.serviceDesk.userTyping(e)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),Object(I.b)("[userTyping] An error with the service desk occurred.",t),[3,3];case 3:return[2]}}))}))},e.prototype.setMessageErrorState=function(e,t){var n;(null===(n=this.serviceDeskCallback)||void 0===n?void 0:n.isClosed)||this.serviceManager.store.dispatch(y.A.setMessageErrorState(e,t))},e}(),Re=function(){function e(e,t){this.isClosed=!1,this.serviceManager=e,this.service=t}return e.prototype.updateAgentAvailability=function(e){this.isClosed||this.serviceManager.store.dispatch(Object(k.l)(e))},e.prototype.agentJoined=function(e){if(!this.isClosed){this.serviceManager.store.dispatch(Object(k.n)(e));var t=Object(E.b)(S.a.AGENT_JOINED,T.b);t.ui_state.agentProfile=e,this.serviceManager.store.dispatch(Object(k.j)(t));this.serviceManager.actions.track({eventName:"Human Chat Started",eventDescription:"Human chat started and agent joined."})}},e.prototype.agentReadMessages=function(){this.isClosed||Object(I.d)("[ServiceDeskCallbackImpl] agentReadMessages")},e.prototype.agentTyping=function(e){this.isClosed||this.serviceManager.store.dispatch(Object(k.m)(e?1:0))},e.prototype.sendMessageToUser=function(e,t){if(!this.isClosed){var n=Object(E.c)(e.output.generic[0],e,!1,!1,null),s=this.serviceManager.store.getState().agentState.agentProfile;s&&s.id!==t&&Object(I.b)("Warning: Got agent ID "+t+" but the current agent's ID is "+s.id+". This change is not yet supported."),n.ui_state.agentProfile=s,this.serviceManager.store.dispatch(Object(k.j)(n));this.serviceManager.actions.track({eventName:"Human Message Sent to User",eventDescription:"Human agent sends message to user."})}},e.prototype.beginTransferToAnotherAgent=function(e){e&&this.serviceManager.store.dispatch(Object(k.n)(e));var t=Object(E.b)(S.a.TRANSFER_TO_AGENT,T.b);t.ui_state.agentProfile=e,this.serviceManager.store.dispatch(Object(k.j)(t))},e.prototype.agentLeftChat=function(){return _e(this,void 0,void 0,(function(){var e;return we(this,(function(t){return this.isClosed||((e=Object(E.b)(S.a.AGENT_LEFT_CHAT,T.b)).ui_state.agentProfile=this.serviceManager.store.getState().agentState.agentProfile,this.serviceManager.store.dispatch(Object(k.j)(e)),this.serviceManager.store.dispatch(Object(k.o)())),[2]}))}))},e.prototype.agentEndedChat=function(){return _e(this,void 0,void 0,(function(){var e;return we(this,(function(t){switch(t.label){case 0:return this.isClosed?[3,2]:((e=Object(E.b)(S.a.AGENT_ENDED_CHAT,T.b)).ui_state.agentProfile=this.serviceManager.store.getState().agentState.agentProfile,this.serviceManager.store.dispatch(Object(k.j)(e)),[4,this.service.doEndChat()]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.setErrorStatus=function(e){if(!this.isClosed){var t=e.type,n=e.logInfo,s=this.serviceManager.store;switch(n&&Object(I.b)("An error occurred in the service desk ("+t+")",n),s.getState().agentState.isConnecting&&e.type===ke.a.DISCONNECTED&&e.isDisconnected&&(e={type:ke.a.CONNECTING}),e.type){case ke.a.DISCONNECTED:if(e.isDisconnected){this.service.showingDisconnectedError=!0;var r=Object(E.b)(S.a.DISCONNECTED,T.b);s.dispatch(Object(k.j)(r)),s.dispatch(Object(k.p)("allowUserInput",!1))}else if(this.service.showingDisconnectedError){this.service.showingDisconnectedError=!1;r=Object(E.b)(S.a.RECONNECTED,T.b);s.dispatch(Object(k.j)(r)),s.dispatch(Object(k.p)("allowUserInput",!0))}break;case ke.a.CONNECTING:var i=this.serviceManager.store.getState().languagePack,a=Object(E.a)(i.errors_connectingToAgent,g.b);this.serviceManager.store.dispatch(y.A.addMessage(a)),this.serviceManager.store.dispatch(Object(k.q)(!1))}}},e}();function Me(e){return new De(e)}function Pe(e){return Object(m.c)(e,T.b)}function je(e){return Object(m.b)(e,T.b)}function Ue(e){if(e)if("object"!==o()(e))Object(I.b)('The custom service desk does not appear to be valid. The type should be "object" but is "'+o()(e)+'"',e);else{var t=["startChat","endChat","sendMessageToAgent"];i()(t).call(t,(function(t){var n=e[t];"function"!=typeof n&&Object(I.b)('The custom service desk does not appear to be valid. The type of property "'+t+'"should be "function" but is "'+o()(n)+'"',n,e)}))}else Object(I.b)("The custom service desk does not appear to be valid. No service desk was provided.",e)}Object(I.a)(Me)},590:function(e,t,n){var s=n(591),r=n(593);function i(e){return(i="function"==typeof r&&"symbol"==typeof s?function(e){return typeof e}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":typeof e})(e)}function a(t){return"function"==typeof r&&"symbol"===i(s)?e.exports=a=function(e){return i(e)}:e.exports=a=function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":i(e)},a(t)}e.exports=a},591:function(e,t,n){e.exports=n(592)},592:function(e,t,n){e.exports=n(233)},593:function(e,t,n){e.exports=n(594)},594:function(e,t,n){e.exports=n(234),n(595),n(596),n(597),n(598),n(599)},595:function(e,t,n){n(27)("asyncDispose")},596:function(e,t,n){n(27)("dispose")},597:function(e,t,n){n(27)("observable")},598:function(e,t,n){n(27)("patternMatch")},599:function(e,t,n){n(27)("replaceAll")},600:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return V})),n.d(t,"a",(function(){return L}));var s,r=n(62),i=n.n(r),a=n(206),o=n.n(a),c=n(46),u=n.n(c),l=n(7),d=n.n(l),h=n(21),p=n.n(h),f=n(101),v=n.n(f),g=n(10),b=n.n(g),E=n(11),y=n.n(E),k=n(3),C=n.n(k),S=n(36),T=n.n(S),A=n(37),m=n.n(A),I=n(242),N=n.n(I),O=n(18),_=n(148),w=n(41),D=n(4),R=n(2),M=n(499),P=n(466),j=n(474),U=n(601),G=(s=function(e,t){return(s=m.a||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?T()(t):(n.prototype=t.prototype,new n)}),x=function(e,t,n,s){return new(n||(n=C.a))((function(r,i){function a(e){try{c(s.next(e))}catch(e){i(e)}}function o(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))},q=function(e,t){var n,s,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof y.a&&(i[b.a]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(r=2&i[0]?s.return:i[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,i[1])).done)return r;switch(s=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,s=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],s=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},L="zendeskweb";e.zendeskScriptLoaded=!1;var V=function(t){function n(e,n,s,r){var i=t.call(this,e,n,s,r)||this;if(i.isConnected=!1,i.sessionID=n,i.account_key=r&&r.subscription&&r.subscription.account&&r.subscription.account.id,!i.account_key)throw new Error("Zendesk account key is not found in definition config.");return i.isChatStarted=!1,i}return G(n,t),n.prototype.ensureZendeskModuleLoadedAndConnected=function(){return x(this,void 0,void 0,(function(){var t=this;return q(this,(function(n){return e.zendeskScriptLoaded?(this.sdk=window.zChat,this.loadingSDKPromise=C.a.resolve()):this.loadingSDKPromise||this.sdk||(this.loadingSDKPromise=new C.a((function(n,s){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=U.r,r.onerror=function(e){s(e)},r.onload=function(){t.loadingSDKPromise=null,t.sdk=window.zChat;var e={account_key:t.account_key,suppress_console_error:!0};t.authJWT&&(e.authentication={jwt_fn:function(e){e(t.authJWT)}}),t.sdk.init(e),t.sdk.on("error",(function(e){"init"===e.context&&t.callback.setErrorStatus({type:P.a.CONNECTING,logInfo:e.message})})),t.sdk.on("connection_update",(function(e){switch(e){case U.c.CONNECTED:t.isConnected=!0,t.callback.setErrorStatus({type:P.a.DISCONNECTED,isDisconnected:!1}),n();break;case U.c.CONNECTING:case U.c.CLOSED:var s=t.isConnected;t.isConnected=!1,s&&t.callback.setErrorStatus({type:P.a.DISCONNECTED,isDisconnected:!0})}}))},document.getElementsByTagName("head")[0].appendChild(r),e.zendeskScriptLoaded=!0}))),[2,this.loadingSDKPromise]}))}))},n.prototype.startChat=function(e){var t,n;return x(this,void 0,void 0,(function(){var s,r,i,a,c,l,h,f=this;return q(this,(function(g){var b;switch(g.label){case 0:return s=v()(b=e.output.generic).call(b,D.j),this.authJWT=null===(n=null===(t=s.transfer_info)||void 0===t?void 0:t.additional_data)||void 0===n?void 0:n.jwt,[4,this.ensureZendeskModuleLoadedAndConnected()];case 1:return g.sent(),this.isChatStarted?[2]:this.isAccountOnline()?(this.sdk.on("chat",(function(e){f.handleChatEvent(e)})),this.sdk.on("agent_update",(function(e){f.handleChatAgentUpdateEvent(e)})),this.sdk.setVisitorInfo({display_name:this.user.id||"Unknown Visitor",email:"",phone:""}),r=function(){return new C.a((function(t){var n,r,i=[];if(i.push(""+U.m+f.sessionID+"_"+p()()),s.topic&&i.push(""+U.n+s.topic.replace(/[^a-zA-Z0-9]/g,"-")),null===(r=null===(n=e.context)||void 0===n?void 0:n.integrations)||void 0===r?void 0:r.zendesk){var a,o=Object(_.b)(e.context.integrations.zendesk);d()(a=u()(o)).call(a,(function(e){i.push(""+U.l+e+"_"+N()(o,e).replace(/[^a-zA-Z0-9]/g,"-"))}))}f.sdk.addTags(i,(function(e){e?(Object(R.b)("[ZendeskServiceDesk]",e),t(!1)):t(!0)}))}))},[4,this.doWithRetry(0,r)]):[3,3];case 2:if(g.sent(),!s.transfer_info||!o()(s.transfer_info.summary_message_to_agent))throw Error(U.f);var E;return d()(E=s.transfer_info.summary_message_to_agent).call(E,(function(e){e.response_type===O.b.TEXT&&f.sdk.sendChatMsg(e.text,(function(e){if(e)throw Error(e)}))})),i=this.sdk.getServingAgentsInfo(),o()(i)&&i.length>0&&(a=i[0],c=a.nick,l=a.display_name,h={id:c,login_name:c,full_name:l,nickname:l,skill_ids:[],email:""},this.currentAgent=h,this.callback.agentJoined(h)),this.isChatStarted=!0,[3,4];case 3:throw Error(U.d);case 4:return[2]}}))}))},n.prototype.endChat=function(){return x(this,void 0,void 0,(function(){var e,t=this;return q(this,(function(n){switch(n.label){case 0:return[4,this.ensureZendeskModuleLoadedAndConnected()];case 1:return n.sent(),this.assertChatStarted(),e=function(){return new C.a((function(e){t.sdk.endChat((function(n){n?(Object(R.b)("[ZendeskServiceDesk]",n),e(!1)):(t.isChatStarted=!1,t.currentAgent=void 0,e(!0))}))}))},[4,this.doWithRetry(0,e)];case 2:return n.sent(),[2]}}))}))},n.prototype.sendMessageToAgent=function(e,t){return x(this,void 0,void 0,(function(){var t,n,s=this;return q(this,(function(r){switch(r.label){case 0:return[4,this.ensureZendeskModuleLoadedAndConnected()];case 1:return r.sent(),this.assertChatStarted(),t=e.input.text,this.isAccountOnline()?(n=function(){return new C.a((function(e){s.sdk.sendChatMsg(t,(function(t){t?(Object(R.b)("[ZendeskServiceDesk] Error sending message",t),e(!1)):(s.sdk.sendTyping(!1),e(!0))}))}))},[4,this.doWithRetry(0,n)]):[3,3];case 2:return r.sent(),[3,4];case 3:throw Error(U.d);case 4:return[2]}}))}))},n.prototype.userReadMessages=function(){return x(this,void 0,void 0,(function(){return q(this,(function(e){switch(e.label){case 0:return[4,this.ensureZendeskModuleLoadedAndConnected()];case 1:return e.sent(),this.assertChatStarted(),this.sdk.markAsRead(),[2]}}))}))},n.prototype.userTyping=function(e){return x(this,void 0,void 0,(function(){return q(this,(function(t){switch(t.label){case 0:return[4,this.ensureZendeskModuleLoadedAndConnected()];case 1:return t.sent(),this.assertChatStarted(),this.sdk.sendTyping(e),[2]}}))}))},n.prototype.handleChatEvent=function(e){switch(e.type){case U.b.MESSAGE:this.handleChatMessageEvent(e);break;case U.b.TYPING:this.handleChatTypingEvent(e);break;case U.b.WAIT_QUEUE:var t={type:U.b.QUEUE_POSITION,nick:e.nick,queue_position:e.wait_queue};this.handleChatQueuePositionEvent(t);break;case U.b.QUEUE_POSITION:this.handleChatQueuePositionEvent(e);break;case U.b.MEMBER_JOIN:break;case U.b.MEMBER_LEAVE:this.handleChatAgentLeaveEvent(e);break;case U.b.LAST_READ:this.handleChatAgentLastReadEvent(e);break;case U.b.COMMENT:this.handleChatComment(e);break;default:console.warn(Object(U.o)(e.type)),this.handleEventNotSupported(e)}},n.prototype.handleChatMessageEvent=function(e){return x(this,void 0,void 0,(function(){var t,n,s,r,i,a,c,u=this;return q(this,(function(l){switch(l.label){case 0:if(t=e.msg,n=e.structured_msg,s=e.options,!this.isAgentMessage(e))return[3,3];if(!(n||o()(s)&&s.length>0))return[3,2];if(!t)throw Error(U.g);return r=n?U.q:U.p,console.warn(r),i=function(){return new C.a((function(e){u.sdk.sendChatComment(r,(function(t){t?(Object(R.b)("[ZendeskServiceDesk]",t),e(!1)):e(!0)}))}))},[4,this.doWithRetry(0,i)];case 1:l.sent(),l.label=2;case 2:a=this.currentAgent?this.currentAgent.id:null,c=Object(M.createAgentResponse)(t),this.callback.agentTyping(!1),this.callback.sendMessageToUser(c,a),l.label=3;case 3:return[2]}}))}))},n.prototype.handleChatTypingEvent=function(e){var t=e.typing;this.isAgentMessage(e)&&this.callback.agentTyping(t)},n.prototype.handleChatQueuePositionEvent=function(e){var t={position_in_queue:e.queue_position};this.callback.updateAgentAvailability(t)},n.prototype.handleChatAgentUpdateEvent=function(e){if(this.isChatStarted){var t=e.nick,n=e.display_name,s={id:t,login_name:t,full_name:n,nickname:n,skill_ids:[],email:"",profile_picture_url:e.avatar_path?e.avatar_path:void 0};this.currentAgent&&this.currentAgent.id!==s.id?(this.callback.beginTransferToAnotherAgent(s),this.callback.agentJoined(s)):this.currentAgent||this.callback.agentJoined(s),this.currentAgent=s}},n.prototype.handleChatAgentLeaveEvent=function(e){var t=e.nick;this.isAgentMessage(e)&&t===this.currentAgent.id&&(this.callback.agentLeftChat(),this.currentAgent=null)},n.prototype.handleChatAgentLastReadEvent=function(e){this.isAgentMessage(e)&&this.callback.agentReadMessages()},n.prototype.handleChatComment=function(e){return x(this,void 0,void 0,(function(){return q(this,(function(t){return this.isVisitorMessage(e)?[2]:(this.handleEventNotSupported(e),[2])}))}))},n.prototype.handleEventNotSupported=function(e){return x(this,void 0,void 0,(function(){var t,n=this;return q(this,(function(s){switch(s.label){case 0:return t=function(){return new C.a((function(t){n.sdk.sendChatComment(Object(U.o)(e.type),(function(e){e?(Object(R.b)("[ZendeskServiceDesk]",e),t(!1)):t(!0)}))}))},[4,this.doWithRetry(0,t)];case 1:return s.sent(),[2]}}))}))},n.prototype.isAgentMessage=function(e){var t;return"string"==typeof e.nick&&i()(t=e.nick).call(t,U.h)},n.prototype.isVisitorMessage=function(e){var t;return"string"==typeof e.nick&&i()(t=e.nick).call(t,U.i)},n.prototype.isAccountOnline=function(){var e;return(null===(e=this.sdk)||void 0===e?void 0:e.getAccountStatus())===U.a.ONLINE},n.prototype.assertChatStarted=function(){if(!this.isChatStarted)throw Error(U.e)},n.prototype.doWithRetry=function(e,t){return x(this,void 0,void 0,(function(){return q(this,(function(n){switch(n.label){case 0:return e>U.j?[2,!1]:[4,t()];case 1:return n.sent()?[2,!0]:[4,Object(w.b)(U.k)];case 2:return n.sent(),[2,this.doWithRetry(e+1,t)]}}))}))},n}(j.a)}).call(this,n(122))},601:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"j",(function(){return o})),n.d(t,"k",(function(){return c})),n.d(t,"r",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"l",(function(){return h})),n.d(t,"n",(function(){return p})),n.d(t,"m",(function(){return f})),n.d(t,"d",(function(){return v})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return E})),n.d(t,"o",(function(){return y})),n.d(t,"p",(function(){return k})),n.d(t,"q",(function(){return C}));var s,r,i,a=n(8);!function(e){e.MESSAGE="chat.msg",e.TYPING="typing",e.WAIT_QUEUE="chat.wait_queue",e.QUEUE_POSITION="chat.queue_position",e.MEMBER_JOIN="chat.memberjoin",e.MEMBER_LEAVE="chat.memberleave",e.LAST_READ="last_read",e.COMMENT="chat.comment"}(s||(s={})),function(e){e.ONLINE="online",e.AWAY="away",e.OFFLINE="offline"}(r||(r={})),function(e){e.CLOSED="closed",e.CONNECTED="connected",e.CONNECTING="connecting"}(i||(i={}));var o=5,c=1e3,u="https://dev.zopim.com/web-sdk/latest/web-sdk.js",l="agent:",d="visitor",h="routing-",p=h+"topic_",f="x-watson-assistant-session_",v=a.c+" Zendesk account is not online",g=a.c+" A message to the agent is required to initiate a connection to the service desk.",b=a.c+" Zendesk Web SDK is not initialized.",E=a.c+" Received a structured message without a string message from agent and this is not supported.",y=function(e){return a.c+" Event type "+e+" not currently supported."},k=a.c+" Received options attached to the message and the options will not be displayed to the user.",C=a.c+" Received a structured message from agent and this is not supported. Only the string message will be sent."}}]);